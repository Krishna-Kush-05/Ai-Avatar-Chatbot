{% extends "base.html" %}
{% block title %}Voice Chatbot{% endblock %}

{% block content %}
<h1 style="display: flex; justify-content: space-between; align-items: center; margin-top: -10px;">
  <span>AI Avtar Chatbot</span>
  <button id="sidebarToggleBtn" title="Toggle Sidebar">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round" style="width: 26px; height: 26px; stroke: #4d575a;">
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </button>
</h1>



<!-- Chat messages area -->
<div id="chat-box" class="chat-box">
  <div id="greeting-message" class="greeting-message">
  <div id="greeting-line1" class="greeting-text">Hello</div>
  <div class="greeting-text">What can I help you with today?</div>
</div>

</div>
  <!-- Chat messages dynamically added here -->
  <!-- Floating Controls Inside Chat Box -->
  <div class="floating-input-card">
    <form id="chat-form" class="chat-form" style="width: 100%;">
      <input type="text" id="chat-input" placeholder="Ask anything" autocomplete="off" />
      <div class="input-row">

        <div style="display: flex; align-items: center; gap: 10px; margin-left: auto;"></div>
        <!-- ðŸŽ¤ Speak button must have this ID to work -->
        <button id="recordButton" type="button" class="speak-btn">ðŸŽ¤ Speak</button>
        <div id="loader" class="loader"></div>


        <!-- Send button -->
        <button type="submit" class="send-btn">Send</button>
      </div>
    </form>

  </div>

  <!-- Controls Section -->


  <style>
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    /* ==== TOGGLE BUTTON STYLING ==== */
    #sidebarToggleBtn {
      position: absolute;
      top: 20px;
      right: 30px;
      background: transparent;
      border: none;
      cursor: pointer;
      z-index: 1001;
      padding: 8px;
      border-radius: 50%;
      transition: transform 0.3s ease, background-color 0.3s ease;
    }

    #sidebarToggleBtn svg {
      width: 26px;
      height: 26px;
      stroke: #555;
      transition: stroke 0.3s ease, transform 0.4s ease;
    }

    #sidebarToggleBtn.active svg {
      stroke: #00c6ff;
      transform: rotate(90deg);
    }


    /* Floating input card */
    .floating-input-card {
  position: absolute;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  width: clamp(50%, 700px, 85%);
  background: rgb(245, 242, 242);
  border-radius: 24px;
  box-shadow: 0 8px 16px rgba(33, 93, 234, 0.563);
  padding: 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 10;
}


    /* Input field */
    #chat-input {
      border: none;
      background: transparent;
      font-size: 1rem;
      padding: 8px;
      outline: none;
      width: 100%;
    }

    /* Row with dropdown + buttons */
    .input-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    /* Fake dropdown styling */
    .dropdown-mock {
      background: #f1f3f4;
      border-radius: 16px;
      padding: 6px 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      color: #333;
      cursor: pointer;
    }

    /* Buttons */
    .speak-btn {
      background: linear-gradient(to right, #7240a7, #095ae7);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 8px 16px;
      font-weight: bold;
      cursor: pointer;
    }

    .send-btn {
      background: linear-gradient(to right, #4caf50, #81c784);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 8px 20px;
      font-weight: bold;
      cursor: pointer;
    }

   .greeting-message {
  background-color: #eaf2f8;
  border-radius: 12px;
  padding: 120px 20px;
  margin: 20px auto;
  text-align: center;
  max-width: 800px;
  font-weight: bold;
  font-size: clamp(1.9rem, 5vw, 2.6rem);
  color: #202124b8;
  overflow: hidden;
  max-height: 500px;
  opacity: 1;
  transition: all 0.6s ease-in-out;
}

.greeting-message.fade-out {
  opacity: 0;
  max-height: 0;
  padding: 0;
  margin: 0;
}

.greeting-text {
  margin: 5px 0;
}
  </style>


  {% endblock %}

  {% block scripts %}

  <script type="module" src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="{{ url_for('static', filename='js/index.js') }}"></script>
  {% endblock %}